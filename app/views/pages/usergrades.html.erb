<div class="container">
<div id="users">
  <input class="search form-control" placeholder="Search" /><br>
   <button class="sort btn btn-primary" data-sort="name">
    Sort by name
  </button><br><br>


  		<div class="list">
			<% @usergrades.each do |user| %>
		
				<div class="table-responsive usergrades">
				<h1 class="name"><strong><%= user.name %> <%=user.last_name %></strong></h1>

					<table class="table table-striped table-hover table-condensed">
							
							<tr>
							<% for submission in user.submissions %>

				              <td width="30%"><%= submission.assignment_name %>:</td>
				              <td width="70%"><%= submission.score %> / <% for assignment in submission.assignments %> <%= assignment.score %></td>
				             </tr>		    
				             <% end %>
							<% end %>
				     
				          	 <td><strong>Total Score:<strong></td> 
				          	 <td><strong><%= user.submissions.sum(:score) %> / <%= @assignments.sum(:score) %> or <%= number_to_percentage user.submissions.sum(:score).to_f * 100 / @assignments.sum(:score) %></strong></td>
				     </table>
			</div>
		 <% end %>
		</div>
</div>
</div>
<script src="http://listjs.com/no-cdn/list.js"></script>
<script>
var options = {
  valueNames: [ 'name' ]
};

var userList = new List('users', options);
</script>